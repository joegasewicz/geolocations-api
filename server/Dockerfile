FROM python:3.13

WORKDIR /geolocations-api
COPY . .

ARG PGPORT
ARG PGDATABASE
ARG PGUSER
ARG PGPASSWORD
ARG PGHOST
ARG SERVER_PORT
ARG SERVER_HOST

ENV PGPORT=${PGPORT}
ENV PGDATABASE=${PGDATABASE}
ENV PGUSER=${PGUSER}
ENV PGPASSWORD=${PGPASSWORD}
ENV PGHOST=${PGHOST}
ENV SERVER_PORT=${SERVER_PORT}
ENV SERVER_HOST=${SERVER_HOST}

RUN pip install pipenv
RUN pipenv install --verbose --system
RUN pipenv install --dev --system

CMD ["python", "prod.py"]
